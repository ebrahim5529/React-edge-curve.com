import{c as pe,j as t,r as se,d as we,L as le,a as oe,y as ae,H as Ce}from"./app-DKkxMuzC.js";import{c as Se,C as ne,a as de,d as De,b as _e}from"./card-Cc0Jf3dJ.js";import{B as b}from"./button-qcAg-NsY.js";import{B as fe}from"./badge-CT9gAhFv.js";import{a as ze,e as me,r as ue,F as ke,t as xe,v as Te,A as Le}from"./app-layout-CclGYQJC.js";import{d as Me}from"./index-D4Ne8d05.js";import{D as Ae,a as Fe,b as Oe,c as Pe,d as $e,e as Be}from"./dialog-BEd_Yxnw.js";import{c as ce}from"./createLucideIcon-BVvUnYjj.js";import{P as he}from"./play-CmRu9oRq.js";import{I as Ee}from"./image-CuGJIRCY.js";import{P as He}from"./pencil-BTsZpd0x.js";import{T as Ie}from"./trash-2-kdqURKuy.js";import{A as qe}from"./arrow-left-jEh3fK-8.js";import{P as Re}from"./plus-D9TilCHX.js";/* empty css            */import"./utils-Cue3ZScu.js";import"./index-HE2J1j0s.js";import"./index-D82qmRnt.js";import"./x-gzNeO3OQ.js";import"./index-CKsjMsz2.js";import"./users-CvlcjkBN.js";import"./chevron-right-D3Yp3koY.js";const Qe=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],Ge=ce("StarOff",Qe);const Je=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ke=ce("Star",Je);const Ue=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ve=ce("TriangleAlert",Ue);function We(I){const e=pe.c(28),{isOpen:l,onClose:c,onConfirm:a,title:w,description:C,confirmText:g,cancelText:q,processing:S}=I,D=w===void 0?"هل أنت متأكد من الحذف؟":w,R=C===void 0?"لا يمكن الغاء هذا الإجراء، سيتم حذف البيانات بشكل نهائي.":C,v=g===void 0?"نعم، حذف":g,N=q===void 0?"إلغاء":q,j=S===void 0?!1:S;let x;e[0]!==c?(x=p=>!p&&c(),e[0]=c,e[1]=x):x=e[1];let y;e[2]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:t.jsx(Ve,{className:"h-6 w-6 text-destructive"})}),e[2]=y):y=e[2];let o;e[3]!==D?(o=t.jsx(Ae,{className:"text-xl font-bold text-center block w-full",children:D}),e[3]=D,e[4]=o):o=e[4];let n;e[5]!==R?(n=t.jsx(Fe,{className:"text-muted-foreground text-center block w-full",children:R}),e[5]=R,e[6]=n):n=e[6];let d;e[7]!==o||e[8]!==n?(d=t.jsxs(Oe,{className:"flex flex-col items-center gap-4 text-center",children:[y,t.jsxs("div",{className:"space-y-2 text-center w-full",children:[o,n]})]}),e[7]=o,e[8]=n,e[9]=d):d=e[9];let f;e[10]!==N||e[11]!==c||e[12]!==j?(f=t.jsx(b,{variant:"outline",onClick:c,disabled:j,className:"flex-1 sm:max-w-[120px]",children:N}),e[10]=N,e[11]=c,e[12]=j,e[13]=f):f=e[13];const u=j?"جاري...":v;let m;e[14]!==a||e[15]!==j||e[16]!==u?(m=t.jsx(b,{variant:"destructive",onClick:a,disabled:j,className:"flex-1 sm:max-w-[120px]",children:u}),e[14]=a,e[15]=j,e[16]=u,e[17]=m):m=e[17];let r;e[18]!==f||e[19]!==m?(r=t.jsxs(Pe,{className:"mt-4 flex flex-row justify-center gap-4 sm:justify-center",children:[f,m]}),e[18]=f,e[19]=m,e[20]=r):r=e[20];let i;e[21]!==d||e[22]!==r?(i=t.jsxs($e,{className:"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] sm:max-w-[425px]",children:[d,r]}),e[21]=d,e[22]=r,e[23]=i):i=e[23];let h;return e[24]!==l||e[25]!==i||e[26]!==x?(h=t.jsx(Be,{open:l,onOpenChange:x,children:i}),e[24]=l,e[25]=i,e[26]=x,e[27]=h):h=e[27],h}function Nt(I){const e=pe.c(85),{project:l,media:c}=I,[a]=se.useState(""),[w,C]=se.useState(!1),[g,q]=se.useState(null),[S,D]=se.useState(!1),{props:R}=we(),v=R.flash?.status;let N;e[0]===Symbol.for("react.memo_cache_sentinel")?(N=(L,J)=>{q({id:L,title:J}),C(!0)},e[0]=N):N=e[0];const j=N;let x;e[1]!==g||e[2]!==l.id?(x=()=>{g&&(D(!0),oe.delete(Te.url({project:l.id,medium:g.id}),{onSuccess:()=>{ae.success("تم حذف الوسائط بنجاح"),C(!1),q(null)},onError:Xe,onFinish:()=>D(!1),preserveState:!0,preserveScroll:!0}))},e[1]=g,e[2]=l.id,e[3]=x):x=e[3];const y=x;let o,n,d,f,u,m,r,i,h,p;if(e[4]!==c||e[5]!==l.id||e[6]!==l.title||e[7]!==a||e[8]!==v){let L;e[19]!==a?(L=s=>{if(!a)return!0;const Ne=s.title&&s.title.toLowerCase().includes(a.toLowerCase()),ye=s.description&&s.description.toLowerCase().includes(a.toLowerCase()),be=s.type&&s.type.toLowerCase().includes(a.toLowerCase());return Ne||ye||be},e[19]=a,e[20]=L):L=e[20];const J=c.filter(L);let K;e[21]!==l.id?(K=s=>{oe.patch(xe.url({project:l.id,medium:s.id}),{is_featured:!s.is_featured},{preserveScroll:!0,onSuccess:()=>{ae.success(s.is_featured?"تم إلغاء تمييز الوسائط":"تم تمييز الوسائط")}})},e[21]=l.id,e[22]=K):K=e[22];const je=K;let U;e[23]===Symbol.for("react.memo_cache_sentinel")?(U={title:"لوحة التحكم",href:Me().url},e[23]=U):U=e[23];let V;e[24]===Symbol.for("react.memo_cache_sentinel")?(V={title:"المشاريع",href:ze().url},e[24]=V):V=e[24];const ge=l.title;let M;e[25]!==l.id?(M=me.url({project:l.id}),e[25]=l.id,e[26]=M):M=e[26];let A;e[27]!==l.title||e[28]!==M?(A={title:ge,href:M},e[27]=l.title,e[28]=M,e[29]=A):A=e[29];let W;e[30]===Symbol.for("react.memo_cache_sentinel")?(W={title:"الوسائط",href:"#"},e[30]=W):W=e[30];let X;e[31]!==A?(X=[U,V,A,W],e[31]=A,e[32]=X):X=e[32];const ve=X;d=Le,h=ve;const ie=`وسائط المشروع: ${l.title}`;e[33]!==ie?(p=t.jsx(Ce,{title:ie}),e[33]=ie,e[34]=p):p=e[34],m="flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",e[35]!==v?(r=v&&t.jsx("div",{className:"rounded border border-green-400 bg-green-100 px-4 py-3 text-green-700",children:v}),e[35]=v,e[36]=r):r=e[36];let F;e[37]!==l.id?(F=me.url({project:l.id}),e[37]=l.id,e[38]=F):F=e[38];let Y;e[39]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(qe,{className:"size-4 ml-2"}),e[39]=Y):Y=e[39];let O;e[40]!==F?(O=t.jsx(b,{variant:"outline",size:"sm",asChild:!0,children:t.jsxs(le,{href:F,children:[Y,"العودة للمشروع"]})}),e[40]=F,e[41]=O):O=e[41];let Z;e[42]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("h1",{className:"text-2xl font-bold",children:"وسائط المشروع"}),e[42]=Z):Z=e[42];let P;e[43]!==l.title?(P=t.jsxs("div",{children:[Z,t.jsxs("p",{className:"text-muted-foreground",children:['إدارة صور وفيديوهات مشروع "',l.title,'"']})]}),e[43]=l.title,e[44]=P):P=e[44];let $;e[45]!==O||e[46]!==P?($=t.jsxs("div",{className:"flex items-center gap-3",children:[O,P]}),e[45]=O,e[46]=P,e[47]=$):$=e[47];let B;e[48]!==l.id?(B=ue.url({project:l.id}),e[48]=l.id,e[49]=B):B=e[49];let ee;e[50]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Re,{className:"size-4 ml-2"}),e[50]=ee):ee=e[50];let E;e[51]!==B?(E=t.jsx(b,{asChild:!0,children:t.jsxs(le,{href:B,children:[ee,"إضافة وسائط"]})}),e[51]=B,e[52]=E):E=e[52],e[53]!==$||e[54]!==E?(i=t.jsxs("div",{className:"flex items-center justify-between",children:[$,E]}),e[53]=$,e[54]=E,e[55]=i):i=e[55],n=ne;let H;e[56]!==c.length?(H=t.jsxs(Se,{children:["جميع الوسائط (",c.length,")"]}),e[56]=c.length,e[57]=H):H=e[57];let te;e[58]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(De,{children:"الصور والفيديوهات الخاصة بالمشروع"}),e[58]=te):te=e[58],e[59]!==H?(u=t.jsxs(_e,{children:[H,te]}),e[59]=H,e[60]=u):u=e[60],o=de,f=J.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed py-16 text-center",children:[t.jsx(ke,{className:"mb-3 size-10 text-muted-foreground"}),t.jsx("p",{className:"text-muted-foreground",children:a?"لا توجد نتائج للبحث":"لا توجد وسائط بعد"}),!a&&t.jsx(b,{asChild:!0,variant:"link",size:"sm",className:"mt-2",children:t.jsx(le,{href:ue.url({project:l.id}),children:"إضافة أول وسائط"})})]}):t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:J.map(s=>t.jsxs(ne,{className:"overflow-hidden",children:[t.jsxs("div",{className:"relative aspect-video",children:[s.type==="image"?t.jsx("img",{src:s.file_url,alt:s.title,className:"h-full w-full object-cover"}):t.jsx("div",{className:"relative h-full w-full bg-muted",children:s.video_embed_url?t.jsx("iframe",{src:s.video_embed_url,title:s.title,className:"h-full w-full",allowFullScreen:!0,frameBorder:"0"}):s.video_url?t.jsx("iframe",{src:s.video_url,title:s.title,className:"h-full w-full",allowFullScreen:!0,frameBorder:"0"}):s.thumbnail_url?t.jsx("img",{src:s.thumbnail_url,alt:s.title,className:"h-full w-full object-cover"}):t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx(he,{className:"size-12 text-muted-foreground"})})}),s.is_featured&&t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx(fe,{className:"bg-yellow-500 text-white",children:"مميز"})})]}),t.jsxs(de,{className:"p-4",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsxs(fe,{variant:s.type==="image"?"default":"secondary",children:[s.type==="image"?t.jsx(Ee,{className:"size-3 ml-1"}):t.jsx(he,{className:"size-3 ml-1"}),s.type==="image"?"صورة":"فيديو"]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(b,{variant:"ghost",size:"icon",title:s.is_featured?"إلغاء التمييز":"تمييز",onClick:()=>je(s),children:s.is_featured?t.jsx(Ge,{className:"size-4 text-yellow-500"}):t.jsx(Ke,{className:"size-4"})}),t.jsx(b,{variant:"ghost",size:"icon",title:"تعديل",asChild:!0,children:t.jsx(le,{href:xe.url({project:l.id,medium:s.id}),children:t.jsx(He,{className:"size-4"})})}),t.jsx(b,{variant:"ghost",size:"icon",title:"حذف",className:"text-destructive hover:text-destructive",onClick:()=>j(s.id,s.title),children:t.jsx(Ie,{className:"size-4"})})]})]}),t.jsx("h3",{className:"font-semibold",children:s.title}),s.description&&t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]})]},s.id))}),e[4]=c,e[5]=l.id,e[6]=l.title,e[7]=a,e[8]=v,e[9]=o,e[10]=n,e[11]=d,e[12]=f,e[13]=u,e[14]=m,e[15]=r,e[16]=i,e[17]=h,e[18]=p}else o=e[9],n=e[10],d=e[11],f=e[12],u=e[13],m=e[14],r=e[15],i=e[16],h=e[17],p=e[18];let _;e[61]!==o||e[62]!==f?(_=t.jsx(o,{children:f}),e[61]=o,e[62]=f,e[63]=_):_=e[63];let z;e[64]!==n||e[65]!==_||e[66]!==u?(z=t.jsxs(n,{children:[u,_]}),e[64]=n,e[65]=_,e[66]=u,e[67]=z):z=e[67];let k;e[68]!==z||e[69]!==m||e[70]!==r||e[71]!==i?(k=t.jsxs("div",{className:m,children:[r,i,z]}),e[68]=z,e[69]=m,e[70]=r,e[71]=i,e[72]=k):k=e[72];let Q;e[73]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>C(!1),e[73]=Q):Q=e[73];const re=`حذف "${g?.title}"`;let T;e[74]!==w||e[75]!==y||e[76]!==S||e[77]!==re?(T=t.jsx(We,{isOpen:w,onClose:Q,onConfirm:y,processing:S,title:re,description:"هل أنت متأكد من رغبتك في حذف هذه الوسائط؟ لا يمكن التراجع عن هذا الإجراء."}),e[74]=w,e[75]=y,e[76]=S,e[77]=re,e[78]=T):T=e[78];let G;return e[79]!==d||e[80]!==k||e[81]!==T||e[82]!==h||e[83]!==p?(G=t.jsxs(d,{breadcrumbs:h,children:[p,k,T]}),e[79]=d,e[80]=k,e[81]=T,e[82]=h,e[83]=p,e[84]=G):G=e[84],G}function Xe(I){ae.error("حدث خطأ أثناء حذف الوسائط"),console.error("Delete error:",I)}export{Nt as default};
