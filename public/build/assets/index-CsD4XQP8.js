import{c as I,r as M,d as U,j as s,L as _,H as A,y as u,a as P}from"./app-DKkxMuzC.js";import{c as D,b as O,d as Q,a as R,C as q}from"./card-Cc0Jf3dJ.js";import{B as a}from"./button-qcAg-NsY.js";import{I as $}from"./input-Bf2yKpCn.js";import{B as F}from"./badge-CT9gAhFv.js";import{a1 as w,a2 as G,A as J,a3 as K,a0 as V}from"./app-layout-CclGYQJC.js";import{d as W}from"./index-D4Ne8d05.js";import{P as X}from"./plus-D9TilCHX.js";import{U as E}from"./users-CvlcjkBN.js";import{E as Y}from"./eye-off-Cl8YrALX.js";import{E as Z}from"./eye-BuYX-QK5.js";import{P as ee}from"./pencil-BTsZpd0x.js";import{T as se}from"./trash-2-kdqURKuy.js";import{S as te}from"./search-H5aXH2Cs.js";/* empty css            */import"./utils-Cue3ZScu.js";import"./index-HE2J1j0s.js";import"./index-D82qmRnt.js";import"./x-gzNeO3OQ.js";import"./createLucideIcon-BVvUnYjj.js";import"./index-CKsjMsz2.js";import"./chevron-right-D3Yp3koY.js";const re=[{title:"لوحة التحكم",href:W().url},{title:"فريق العمل",href:"/team-members"}];function Pe(l){const e=I.c(27),{teamMembers:h}=l,[r,L]=M.useState(""),{props:T}=U(),x=T.status;let C;e:{if(!r.trim()){C=h;break e}let t;if(e[0]!==r||e[1]!==h){const S=r.toLowerCase();t=h.filter(k=>k.name.toLowerCase().includes(S)||k.role.toLowerCase().includes(S)),e[0]=r,e[1]=h,e[2]=t}else t=e[2];C=t}const f=C,B=ae,H=le;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(A,{title:"فريق العمل"}),e[3]=p):p=e[3];let i;e[4]!==x?(i=x&&s.jsx("div",{className:"rounded border border-green-400 bg-green-100 px-4 py-3 text-green-700",children:x}),e[4]=x,e[5]=i):i=e[5];let j;e[6]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"فريق العمل"}),s.jsx("p",{className:"text-muted-foreground",children:"إدارة أعضاء فريق العمل في الموقع"})]}),e[6]=j):j=e[6];let N;e[7]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsxs("div",{className:"flex items-center justify-between",children:[j,s.jsx(a,{asChild:!0,children:s.jsxs(_,{href:w.url(),children:[s.jsx(X,{className:"size-4"}),"إضافة عضو"]})})]}),e[7]=N):N=e[7];let b;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(D,{children:"قائمة الأعضاء"}),e[8]=b):b=e[8];const z=h?.length||0;let c;e[9]!==z?(c=s.jsxs(O,{children:[b,s.jsxs(Q,{children:["جميع الأعضاء (",z,")"]})]}),e[9]=z,e[10]=c):c=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(te,{className:"absolute top-1/2 right-3 size-4 -translate-y-1/2 text-muted-foreground"}),e[11]=g):g=e[11];let v;e[12]===Symbol.for("react.memo_cache_sentinel")?(v=t=>L(t.target.value),e[12]=v):v=e[12];let n;e[13]!==r?(n=s.jsxs("div",{className:"relative mb-4",children:[g,s.jsx($,{placeholder:"البحث بالاسم أو الدور...",value:r,onChange:v,className:"pr-10"})]}),e[13]=r,e[14]=n):n=e[14];let o;e[15]!==f||e[16]!==r?(o=f?.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed py-16 text-center",children:[s.jsx(E,{className:"mb-3 size-10 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:r?"لا توجد نتائج للبحث":"لا يوجد أعضاء بعد"}),!r&&s.jsx(a,{asChild:!0,variant:"link",size:"sm",className:"mt-2",children:s.jsx(_,{href:w.url(),children:"إضافة أول عضو"})})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-right",children:[s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الصورة"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الاسم"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الدور"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الحالة"}),s.jsx("th",{className:"pr-4 pb-3 text-center font-medium",children:"الإجراءات"})]})}),s.jsx("tbody",{children:f?.map(t=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"py-3 pr-4",children:t.image_url?s.jsx("img",{src:t.image_url,alt:t.name,className:"size-10 rounded-md object-contain"}):s.jsx("div",{className:"flex size-10 items-center justify-center rounded-md bg-muted",children:s.jsx(E,{className:"size-5 text-muted-foreground"})})}),s.jsx("td",{className:"py-3 pr-4 font-medium",children:t.name}),s.jsx("td",{className:"py-3 pr-4",children:t.role}),s.jsx("td",{className:"py-3 pr-4",children:s.jsx(F,{variant:t.is_published?"default":"secondary",children:t.is_published?"منشور":"غير منشور"})}),s.jsx("td",{className:"py-3 pr-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(a,{variant:"ghost",size:"icon",title:t.is_published?"إلغاء النشر":"نشر",onClick:()=>H(t),children:t.is_published?s.jsx(Y,{className:"size-4 text-orange-500"}):s.jsx(Z,{className:"size-4 text-green-500"})}),s.jsx(a,{asChild:!0,variant:"ghost",size:"icon",title:"تعديل",children:s.jsx(_,{href:G.url({team_member:t.id}),children:s.jsx(ee,{className:"size-4"})})}),s.jsx(a,{variant:"ghost",size:"icon",title:"حذف",className:"text-destructive hover:text-destructive",onClick:()=>B(t.id,t.name),children:s.jsx(se,{className:"size-4"})})]})})]},t.id))})]})}),e[15]=f,e[16]=r,e[17]=o):o=e[17];let d;e[18]!==n||e[19]!==o?(d=s.jsxs(R,{children:[n,o]}),e[18]=n,e[19]=o,e[20]=d):d=e[20];let m;e[21]!==d||e[22]!==c?(m=s.jsxs(q,{children:[c,d]}),e[21]=d,e[22]=c,e[23]=m):m=e[23];let y;return e[24]!==m||e[25]!==i?(y=s.jsxs(J,{breadcrumbs:re,children:[p,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[i,N,m]})]}),e[24]=m,e[25]=i,e[26]=y):y=e[26],y}function le(l){P.patch(V.url({team_member:l.id}),{is_published:!l.is_published,_method:"PUT"},{preserveScroll:!0,onSuccess:()=>{u.success(l.is_published?"تم إلغاء نشر العضو":"تم نشر العضو بنجاح")}})}function ae(l,e){u.warn(s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"mb-2 font-bold",children:['هل أنت متأكد من حذف "',e,'"؟']}),s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(a,{size:"sm",variant:"destructive",onClick:()=>{P.delete(K.url({team_member:l}),{onSuccess:ce}),u.dismiss()},children:"نعم، حذف"}),s.jsx(a,{size:"sm",variant:"outline",onClick:ie,children:"إلغاء"})]})]}),{closeButton:!1,closeOnClick:!1,draggable:!1,autoClose:!1})}function ie(){return u.dismiss()}function ce(){u.success("تم حذف العضو بنجاح")}export{Pe as default};
