import{c as H,r as I,d as A,j as s,L as S,H as D,y as u,a as E}from"./app-RK4ado1D.js";import{b as O,d as Q,c as R,a as U,C as q}from"./card-GcPcx1w9.js";import{B as a}from"./button-Br0_Gioh.js";import{I as $}from"./input-D5LjI_q2.js";import{B as F}from"./badge-CdGqp8WL.js";import{y as k,U as w,z as G,A as J,E as K,B as M}from"./app-layout-B6qKdNEV.js";import{d as V}from"./index-D4Ne8d05.js";import{P as W}from"./plus-DZaUbKnl.js";import{E as X}from"./eye-off-BGHCvW-q.js";import{E as Y}from"./eye-eHOggPp4.js";import{P as Z}from"./pencil-CA3I04To.js";import{T as ee}from"./trash-2-DWKjy2Mb.js";import{S as se}from"./search-DJXQFbZ0.js";/* empty css            */import"./index-DsKptZ-5.js";import"./x-2TRwMiJG.js";import"./createLucideIcon-AJccYIJT.js";import"./index-8v3b3pi-.js";import"./chevron-right-BlMZ1c-1.js";const te=[{title:"لوحة التحكم",href:V().url},{title:"الشركاء",href:"/partners"}];function _e(r){const e=H.c(27),{partners:i}=r,[l,P]=I.useState(""),{props:B}=A(),x=B.status;let C;e:{if(!l.trim()){C=i;break e}let t;if(e[0]!==i||e[1]!==l){const _=l.toLowerCase();t=i.filter(z=>z.name.toLowerCase().includes(_)||z.url&&z.url.toLowerCase().includes(_)),e[0]=i,e[1]=l,e[2]=t}else t=e[2];C=t}const f=C,L=re,T=le;let j;e[3]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(D,{title:"الشركاء"}),e[3]=j):j=e[3];let c;e[4]!==x?(c=x&&s.jsx("div",{className:"rounded border border-green-400 bg-green-100 px-4 py-3 text-green-700",children:x}),e[4]=x,e[5]=c):c=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"الشركاء"}),s.jsx("p",{className:"text-muted-foreground",children:"إدارة الشركاء المعروضة على الموقع"})]}),e[6]=p):p=e[6];let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsxs("div",{className:"flex items-center justify-between",children:[p,s.jsx(a,{asChild:!0,children:s.jsxs(S,{href:k.url(),children:[s.jsx(W,{className:"size-4"}),"إضافة شريك"]})})]}),e[7]=b):b=e[7];let N;e[8]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(R,{children:"قائمة الشركاء"}),e[8]=N):N=e[8];let n;e[9]!==i.length?(n=s.jsxs(O,{children:[N,s.jsxs(Q,{children:["جميع الشركاء المعروضة في الموقع (",i.length,")"]})]}),e[9]=i.length,e[10]=n):n=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(se,{className:"absolute top-1/2 right-3 size-4 -translate-y-1/2 text-muted-foreground"}),e[11]=g):g=e[11];let v;e[12]===Symbol.for("react.memo_cache_sentinel")?(v=t=>P(t.target.value),e[12]=v):v=e[12];let d;e[13]!==l?(d=s.jsxs("div",{className:"relative mb-4",children:[g,s.jsx($,{placeholder:"البحث بالاسم أو الرابط...",value:l,onChange:v,className:"pr-10"})]}),e[13]=l,e[14]=d):d=e[14];let o;e[15]!==f||e[16]!==l?(o=f.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed py-16 text-center",children:[s.jsx(w,{className:"mb-3 size-10 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:l?"لا توجد نتائج للبحث":"لا شركاء بعد"}),!l&&s.jsx(a,{asChild:!0,variant:"link",size:"sm",className:"mt-2",children:s.jsx(S,{href:k.url(),children:"إضافة أول شريك"})})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-right",children:[s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الصورة"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الاسم"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الرابط"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الحالة"}),s.jsx("th",{className:"pr-4 pb-3 text-center font-medium",children:"الإجراءات"})]})}),s.jsx("tbody",{children:f.map(t=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"py-3 pr-4",children:t.image_url?s.jsx("img",{src:t.image_url,alt:t.name,className:"size-10 rounded-md object-contain"}):s.jsx("div",{className:"flex size-10 items-center justify-center rounded-md bg-muted",children:s.jsx(w,{className:"size-5 text-muted-foreground"})})}),s.jsx("td",{className:"py-3 pr-4 font-medium",children:t.name}),s.jsx("td",{className:"py-3 pr-4",children:t.url?s.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"فتح الرابط"}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),s.jsx("td",{className:"py-3 pr-4",children:s.jsx(F,{variant:t.is_published?"default":"secondary",children:t.is_published?"منشور":"غير منشور"})}),s.jsx("td",{className:"py-3 pr-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(a,{variant:"ghost",size:"icon",title:t.is_published?"إلغاء النشر":"نشر",onClick:()=>T(t),children:t.is_published?s.jsx(X,{className:"size-4 text-orange-500"}):s.jsx(Y,{className:"size-4 text-green-500"})}),s.jsx(a,{asChild:!0,variant:"ghost",size:"icon",title:"تعديل",children:s.jsx(S,{href:G.url({partner:t.id}),children:s.jsx(Z,{className:"size-4"})})}),s.jsx(a,{variant:"ghost",size:"icon",title:"حذف",className:"text-destructive hover:text-destructive",onClick:()=>L(t.id,t.name),children:s.jsx(ee,{className:"size-4"})})]})})]},t.id))})]})}),e[15]=f,e[16]=l,e[17]=o):o=e[17];let m;e[18]!==d||e[19]!==o?(m=s.jsxs(U,{children:[d,o]}),e[18]=d,e[19]=o,e[20]=m):m=e[20];let h;e[21]!==m||e[22]!==n?(h=s.jsxs(q,{children:[n,m]}),e[21]=m,e[22]=n,e[23]=h):h=e[23];let y;return e[24]!==h||e[25]!==c?(y=s.jsxs(J,{breadcrumbs:te,children:[j,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[c,b,h]})]}),e[24]=h,e[25]=c,e[26]=y):y=e[26],y}function le(r){E.patch(M.url({partner:r.id}),{is_published:!r.is_published},{preserveScroll:!0,onSuccess:()=>{u.success(r.is_published?"تم إلغاء نشر الشريك":"تم نشر الشريك بنجاح")}})}function re(r,e){u.warn(s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"mb-2 font-bold",children:['هل أنت متأكد من حذف "',e,'"؟']}),s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(a,{size:"sm",variant:"destructive",onClick:()=>{E.delete(K.url({partner:r}),{onSuccess:ae}),u.dismiss()},children:"نعم، حذف"}),s.jsx(a,{size:"sm",variant:"outline",onClick:ie,children:"إلغاء"})]})]}),{closeButton:!1,closeOnClick:!1,draggable:!1,autoClose:!1})}function ie(){return u.dismiss()}function ae(){u.success("تم حذف الشريك بنجاح")}export{_e as default};
