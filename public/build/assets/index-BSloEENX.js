import{c as B,r as E,d as D,j as s,L as C,H as T,y,a as $}from"./app-DKkxMuzC.js";import{b as A,d as H,c as I,a as Q,C as R}from"./card-Cc0Jf3dJ.js";import{B as a}from"./button-qcAg-NsY.js";import{I as q}from"./input-Bf2yKpCn.js";import{B as F}from"./badge-CT9gAhFv.js";import{J as _,A as J}from"./app-layout-CclGYQJC.js";import{d as O}from"./index-D4Ne8d05.js";import{E as G}from"./eye-BuYX-QK5.js";import{P as K}from"./pencil-BTsZpd0x.js";import{T as M}from"./trash-2-kdqURKuy.js";import{P as U}from"./plus-D9TilCHX.js";import{S as V}from"./search-H5aXH2Cs.js";/* empty css            */import"./utils-Cue3ZScu.js";import"./index-HE2J1j0s.js";import"./index-D82qmRnt.js";import"./x-gzNeO3OQ.js";import"./createLucideIcon-BVvUnYjj.js";import"./index-CKsjMsz2.js";import"./users-CvlcjkBN.js";import"./chevron-right-D3Yp3koY.js";const W=[{title:"لوحة التحكم",href:O().url},{title:"المدونة",href:"/dashboard/posts"}];function ye(v){const e=B.c(27),{posts:l}=v,[r,k]=E.useState(""),{props:L}=D(),x=L.status;let w;e:{if(!r.trim()){w=l;break e}let t;if(e[0]!==l||e[1]!==r){const z=r.toLowerCase();t=l.filter(S=>S.title.toLowerCase().includes(z)||S.slug.toLowerCase().includes(z)),e[0]=l,e[1]=r,e[2]=t}else t=e[2];w=t}const h=w,P=X;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(T,{title:"المدونة"}),e[3]=u):u=e[3];let i;e[4]!==x?(i=x&&s.jsx("div",{className:"rounded border border-green-400 bg-green-100 px-4 py-3 text-green-700",children:x}),e[4]=x,e[5]=i):i=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsxs("div",{className:"text-right",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"المدونة"}),s.jsx("p",{className:"text-muted-foreground",children:"إدارة المقالات والأخبار"})]}),e[6]=f):f=e[6];let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsxs("div",{className:"flex items-center justify-between",children:[f,s.jsx(a,{asChild:!0,children:s.jsxs(C,{href:"/dashboard/posts/create",children:["إضافة مقال جديد",s.jsx(U,{className:"size-4 mr-2"})]})})]}),e[7]=p):p=e[7];let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(I,{children:"قائمة المقالات"}),e[8]=j):j=e[8];let d;e[9]!==l.length?(d=s.jsxs(A,{children:[j,s.jsxs(H,{children:["جميع المقالات (",l.length,")"]})]}),e[9]=l.length,e[10]=d):d=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(V,{className:"absolute top-1/2 left-3 size-4 -translate-y-1/2 text-muted-foreground"}),e[11]=g):g=e[11];let b;e[12]===Symbol.for("react.memo_cache_sentinel")?(b=t=>k(t.target.value),e[12]=b):b=e[12];let c;e[13]!==r?(c=s.jsxs("div",{className:"relative mb-4",children:[g,s.jsx(q,{placeholder:"البحث بالعنوان...",value:r,onChange:b,className:"pl-10 text-right"})]}),e[13]=r,e[14]=c):c=e[14];let n;e[15]!==h||e[16]!==r?(n=h.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed py-16 text-center",children:[s.jsx(_,{className:"mb-3 size-10 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:r?"لا توجد نتائج للبحث":"لا توجد مقالات بعد"}),!r&&s.jsx(a,{asChild:!0,variant:"link",size:"sm",className:"mt-2",children:s.jsx(C,{href:"/dashboard/posts/create",children:"كتابة أول مقال"})})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full table-fixed",children:[s.jsx("thead",{className:"bg-muted/50 rounded-t-xl",children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"px-4 py-3 text-right font-medium text-muted-foreground w-24",children:"الصورة"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium text-muted-foreground w-2/5",children:"العنوان"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium text-muted-foreground w-1/6 whitespace-nowrap",children:"تاريخ النشر"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium text-muted-foreground w-1/6",children:"الحالة"}),s.jsx("th",{className:"px-4 py-3 text-center font-medium text-muted-foreground w-32",children:"الإجراءات"})]})}),s.jsx("tbody",{children:h.map(t=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"px-4 py-3",children:t.image_url?s.jsx("img",{src:t.image_url,alt:t.title,className:"h-12 w-20 rounded-md object-cover"}):s.jsx("div",{className:"flex h-12 w-20 items-center justify-center rounded-md bg-muted",children:s.jsx(_,{className:"size-5 text-muted-foreground"})})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"line-clamp-2 max-w-[200px] text-right",title:t.title,children:t.title})}),s.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground whitespace-nowrap",children:t.published_at?new Date(t.published_at).toLocaleDateString("ar-SA"):"-"}),s.jsx("td",{className:"px-4 py-3",children:s.jsx(F,{variant:t.is_published?"default":"secondary",children:t.is_published?"منشور":"مسودة"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-center gap-1 flex-row-reverse",children:[s.jsx(a,{asChild:!0,variant:"ghost",size:"icon",title:"عرض في الموقع",children:s.jsx("a",{href:`/blog/${t.slug}`,target:"_blank",rel:"noopener noreferrer",children:s.jsx(G,{className:"size-4 text-blue-500"})})}),s.jsx(a,{asChild:!0,variant:"ghost",size:"icon",title:"تعديل",children:s.jsx(C,{href:`/dashboard/posts/${t.id}/edit`,children:s.jsx(K,{className:"size-4"})})}),s.jsx(a,{variant:"ghost",size:"icon",title:"حذف",className:"text-destructive hover:text-destructive",onClick:()=>P(t.id,t.title),children:s.jsx(M,{className:"size-4"})})]})})]},t.id))})]})}),e[15]=h,e[16]=r,e[17]=n):n=e[17];let o;e[18]!==c||e[19]!==n?(o=s.jsxs(Q,{children:[c,n]}),e[18]=c,e[19]=n,e[20]=o):o=e[20];let m;e[21]!==o||e[22]!==d?(m=s.jsxs(R,{children:[d,o]}),e[21]=o,e[22]=d,e[23]=m):m=e[23];let N;return e[24]!==m||e[25]!==i?(N=s.jsxs(J,{breadcrumbs:W,children:[u,s.jsxs("div",{dir:"rtl",className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[i,p,m]})]}),e[24]=m,e[25]=i,e[26]=N):N=e[26],N}function X(v,e){y.warn(s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"mb-2 font-bold",children:['هل أنت متأكد من حذف "',e,'"؟']}),s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(a,{size:"sm",variant:"destructive",onClick:()=>{$.delete(`/dashboard/posts/${v}`,{onSuccess:Z}),y.dismiss()},children:"نعم، حذف"}),s.jsx(a,{size:"sm",variant:"outline",onClick:Y,children:"إلغاء"})]})]}),{closeButton:!1,closeOnClick:!1,draggable:!1,autoClose:!1})}function Y(){return y.dismiss()}function Z(){y.success("تم حذف المقال بنجاح")}export{ye as default};
