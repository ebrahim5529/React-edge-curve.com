import{c as G,r as Q,d as J,j as s,H as K,a as I,y as p}from"./app-RK4ado1D.js";import{b as V,d as W,c as X,a as Y,C as Z}from"./card-GcPcx1w9.js";import{B as a}from"./button-Br0_Gioh.js";import{I as q}from"./input-D5LjI_q2.js";import{B as ee}from"./badge-CdGqp8WL.js";import{L as A}from"./label-phrGq4UL.js";import{C as se}from"./checkbox-CjEdCJYw.js";import{g as te,b as re,D as le,a as ae,d as ie,e as ce}from"./dialog-CVh4B_av.js";import{U as oe,Q as ne,A as de,S as me,T as xe}from"./app-layout-B6qKdNEV.js";import{d as he}from"./index-D4Ne8d05.js";import{E as fe}from"./eye-off-BGHCvW-q.js";import{E as pe}from"./eye-eHOggPp4.js";import{T as ue}from"./trash-2-DWKjy2Mb.js";import{c as je}from"./createLucideIcon-AJccYIJT.js";import{S as ge}from"./search-DJXQFbZ0.js";/* empty css            */import"./index-8v3b3pi-.js";import"./index-DsKptZ-5.js";import"./check-CtUhcDRM.js";import"./x-2TRwMiJG.js";import"./chevron-right-BlMZ1c-1.js";const ye=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],be=je("UserPlus",ye),ve=[{title:"لوحة التحكم",href:he().url},{title:"المستخدمين",href:"/users"}];function Je(i){const e=G.c(40),{users:l}=i,[r,R]=Q.useState(""),[B,F]=Q.useState(!1),{props:O}=J(),u=O.status,j=O.error;let H;e:{if(!r.trim()){H=l;break e}let t;if(e[0]!==r||e[1]!==l){const U=r.toLowerCase();t=l.filter(P=>P.name.toLowerCase().includes(U)||P.email.toLowerCase().includes(U)),e[0]=r,e[1]=l,e[2]=t}else t=e[2];H=t}const g=H,M=_e,$=Ne;let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(K,{title:"المستخدمين"}),e[3]=y):y=e[3];let c;e[4]!==u?(c=u&&s.jsx("div",{className:"rounded border border-green-400 bg-green-100 px-4 py-3 text-green-700",children:u}),e[4]=u,e[5]=c):c=e[5];let o;e[6]!==j?(o=j&&s.jsx("div",{className:"rounded border border-red-400 bg-red-100 px-4 py-3 text-red-700",children:j}),e[6]=j,e[7]=o):o=e[7];let b;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"المستخدمين"}),s.jsx("p",{className:"text-muted-foreground",children:"إدارة مستخدمي لوحة التحكم"})]}),e[8]=b):b=e[8];let v;e[9]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(te,{asChild:!0,children:s.jsxs(a,{children:[s.jsx(be,{className:"ms-2 size-4"}),"إضافة مستخدم"]})}),e[9]=v):v=e[9];let N,_;e[10]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsxs(re,{children:[s.jsx(le,{children:"إضافة مستخدم جديد"}),s.jsx(ae,{children:"أضف مستخدم جديد لنظام إدارة المحتوى"})]}),_=t=>{t.preventDefault();const U=new FormData(t.currentTarget);I.post(ne.url(),U,{onSuccess:()=>{F(!1),p.success("تم إضافة المستخدم بنجاح")}})},e[10]=N,e[11]=_):(N=e[10],_=e[11]);let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs("div",{className:"grid gap-2",children:[s.jsx(A,{htmlFor:"name",children:"الاسم"}),s.jsx(q,{id:"name",name:"name",required:!0,placeholder:"اسم المستخدم"})]}),e[12]=S):S=e[12];let C;e[13]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs("div",{className:"grid gap-2",children:[s.jsx(A,{htmlFor:"email",children:"البريد الإلكتروني"}),s.jsx(q,{id:"email",name:"email",type:"email",required:!0,placeholder:"البريد@example.com"})]}),e[13]=C):C=e[13];let D;e[14]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs("div",{className:"grid gap-2",children:[s.jsx(A,{htmlFor:"password",children:"كلمة المرور"}),s.jsx(q,{id:"password",name:"password",type:"password",required:!0,minLength:8,placeholder:"كلمة المرور"})]}),e[14]=D):D=e[14];let k;e[15]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[s.jsx(se,{id:"is_active",name:"is_active",value:"1",defaultChecked:!0}),s.jsx(A,{htmlFor:"is_active",className:"text-sm font-normal",children:"مفعل"})]}),e[15]=k):k=e[15];let w;e[16]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsxs(ie,{children:[N,s.jsxs("form",{onSubmit:_,className:"space-y-4",children:[S,C,D,k,s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(a,{type:"button",variant:"outline",onClick:()=>F(!1),children:"إلغاء"}),s.jsx(a,{type:"submit",children:"إضافة المستخدم"})]})]})]}),e[16]=w):w=e[16];let n;e[17]!==B?(n=s.jsxs("div",{className:"flex items-center justify-between",children:[b,s.jsxs(ce,{open:B,onOpenChange:F,children:[v,w]})]}),e[17]=B,e[18]=n):n=e[18];let z;e[19]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(X,{children:"قائمة المستخدمين"}),e[19]=z):z=e[19];let d;e[20]!==l.length?(d=s.jsxs(V,{children:[z,s.jsxs(W,{children:["جميع المستخدمين في لوحة التحكم (",l.length,")"]})]}),e[20]=l.length,e[21]=d):d=e[21];let L;e[22]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(ge,{className:"absolute top-1/2 right-3 size-4 -translate-y-1/2 text-muted-foreground"}),e[22]=L):L=e[22];let T;e[23]===Symbol.for("react.memo_cache_sentinel")?(T=t=>R(t.target.value),e[23]=T):T=e[23];let m;e[24]!==r?(m=s.jsxs("div",{className:"relative mb-4",children:[L,s.jsx(q,{placeholder:"البحث بالاسم أو البريد الإلكتروني...",value:r,onChange:T,className:"pr-10"})]}),e[24]=r,e[25]=m):m=e[25];let x;e[26]!==g||e[27]!==r?(x=g.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed py-16 text-center",children:[s.jsx(oe,{className:"mb-3 size-10 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:r?"لا توجد نتائج للبحث":"لا مستخدمين بعد"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-right",children:[s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الاسم"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"البريد الإلكتروني"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الحالة"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"تاريخ التسجيل"}),s.jsx("th",{className:"pr-4 pb-3 text-center font-medium",children:"الإجراءات"})]})}),s.jsx("tbody",{children:g.map(t=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"py-3 pr-4 font-medium",children:t.name}),s.jsx("td",{className:"py-3 pr-4 text-sm",children:t.email}),s.jsx("td",{className:"py-3 pr-4",children:s.jsx(ee,{variant:t.is_active?"default":"secondary",children:t.is_active?"مفعل":"معطل"})}),s.jsx("td",{className:"py-3 pr-4 text-sm text-muted-foreground",children:new Date(t.created_at).toLocaleDateString("ar-SA")}),s.jsx("td",{className:"py-3 pr-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(a,{variant:"ghost",size:"icon",title:t.is_active?"تعطيل":"تفعيل",onClick:()=>$(t),children:t.is_active?s.jsx(fe,{className:"size-4 text-orange-500"}):s.jsx(pe,{className:"size-4 text-green-500"})}),s.jsx(a,{variant:"ghost",size:"icon",title:"حذف",className:"text-destructive hover:text-destructive",onClick:()=>M(t.id,t.name),children:s.jsx(ue,{className:"size-4"})})]})})]},t.id))})]})}),e[26]=g,e[27]=r,e[28]=x):x=e[28];let h;e[29]!==m||e[30]!==x?(h=s.jsxs(Y,{children:[m,x]}),e[29]=m,e[30]=x,e[31]=h):h=e[31];let f;e[32]!==d||e[33]!==h?(f=s.jsxs(Z,{children:[d,h]}),e[32]=d,e[33]=h,e[34]=f):f=e[34];let E;return e[35]!==n||e[36]!==f||e[37]!==c||e[38]!==o?(E=s.jsxs(de,{breadcrumbs:ve,children:[y,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[c,o,n,f]})]}),e[35]=n,e[36]=f,e[37]=c,e[38]=o,e[39]=E):E=e[39],E}function Ne(i){I.patch(xe.url({user:i.id}),{},{preserveScroll:!0,onSuccess:()=>{p.success(i.is_active?"تم تعطيل المستخدم":"تم تفعيل المستخدم")}})}function _e(i,e){p.warn(s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"mb-2 font-bold",children:['هل أنت متأكد من حذف المستخدم "',e,'"؟']}),s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(a,{size:"sm",variant:"destructive",onClick:()=>{I.delete(me.url({user:i}),{onSuccess:Ce}),p.dismiss()},children:"نعم، حذف"}),s.jsx(a,{size:"sm",variant:"outline",onClick:Se,children:"إلغاء"})]})]}),{closeButton:!1,closeOnClick:!1,draggable:!1,autoClose:!1})}function Se(){return p.dismiss()}function Ce(){p.success("تم حذف المستخدم بنجاح")}export{Je as default};
