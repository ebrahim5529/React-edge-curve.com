import{c as A,r as D,d as F,j as s,L as C,H as O,y as x,a as P}from"./app-BaXtapKR.js";import{b as Q,d as R,c as $,a as q,C as J}from"./card-Dx7KTIBb.js";import{B as l,d as M}from"./index-DlZFhPff.js";import{I as V}from"./input-CGOknTio.js";import{B as k}from"./badge-dHGoqTWF.js";import{c as w,F as L,p as G,e as E,A as K,J as U}from"./app-layout-DpzhBmeF.js";import{P as W}from"./plus-CSjLnq5p.js";import{c as X}from"./createLucideIcon-6WwLsWPQ.js";import{E as Y}from"./eye-off-B_5Bq1gT.js";import{E as Z}from"./eye-CUNp02Id.js";import{P as ee}from"./pencil-DSybjfbP.js";import{T as se}from"./trash-2-CmKNeCfb.js";import{S as te}from"./search-MxRxDc-N.js";/* empty css            */import"./index-BoE73oRJ.js";import"./x-Cp85VLkt.js";import"./index-CxBACj8_.js";const re=[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]],le=X("Images",re),ie=[{title:"لوحة التحكم",href:M().url},{title:"المشاريع",href:"/projects"}];function ke(i){const e=A.c(27),{projects:a}=i,[r,I]=D.useState(""),{props:B}=F(),u=B.status;let z;e:{if(!r.trim()){z=a;break e}let t;if(e[0]!==a||e[1]!==r){const S=r.toLowerCase();t=a.filter(_=>_.title.toLowerCase().includes(S)||_.category.toLowerCase().includes(S)||_.description.toLowerCase().includes(S)),e[0]=a,e[1]=r,e[2]=t}else t=e[2];z=t}const f=z,H=ce,T=ae;let j;e[3]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(O,{title:"المشاريع"}),e[3]=j):j=e[3];let c;e[4]!==u?(c=u&&s.jsx("div",{className:"rounded border border-green-400 bg-green-100 px-4 py-3 text-green-700",children:u}),e[4]=u,e[5]=c):c=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"المشاريع"}),s.jsx("p",{className:"text-muted-foreground",children:"إدارة مشاريع المعرض على الموقع"})]}),e[6]=p):p=e[6];let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsxs("div",{className:"flex items-center justify-between",children:[p,s.jsx(l,{asChild:!0,children:s.jsxs(C,{href:w.url(),children:[s.jsx(W,{className:"size-4"}),"إضافة مشروع"]})})]}),e[7]=b):b=e[7];let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx($,{children:"قائمة المشاريع"}),e[8]=g):g=e[8];let n;e[9]!==a.length?(n=s.jsxs(Q,{children:[g,s.jsxs(R,{children:["جميع المشاريع المعروضة في قسم المعرض (",a.length,")"]})]}),e[9]=a.length,e[10]=n):n=e[10];let N;e[11]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(te,{className:"absolute top-1/2 right-3 size-4 -translate-y-1/2 text-muted-foreground"}),e[11]=N):N=e[11];let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y=t=>I(t.target.value),e[12]=y):y=e[12];let o;e[13]!==r?(o=s.jsxs("div",{className:"relative mb-4",children:[N,s.jsx(V,{placeholder:"البحث بالعنوان أو الفئة...",value:r,onChange:y,className:"pr-10"})]}),e[13]=r,e[14]=o):o=e[14];let d;e[15]!==f||e[16]!==r?(d=f.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed py-16 text-center",children:[s.jsx(L,{className:"mb-3 size-10 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:r?"لا توجد نتائج للبحث":"لا مشاريع بعد"}),!r&&s.jsx(l,{asChild:!0,variant:"link",size:"sm",className:"mt-2",children:s.jsx(C,{href:w.url(),children:"إضافة أول مشروع"})})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-right",children:[s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الصورة"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"العنوان"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الفئة"}),s.jsx("th",{className:"pr-4 pb-3 font-medium",children:"الحالة"}),s.jsx("th",{className:"pr-4 pb-3 text-center font-medium",children:"الإجراءات"})]})}),s.jsx("tbody",{children:f.map(t=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"py-3 pr-4",children:t.image?s.jsx("img",{src:`/storage/${t.image}`,alt:t.title,className:"size-10 rounded-md object-cover"}):s.jsx("div",{className:"flex size-10 items-center justify-center rounded-md bg-muted",children:s.jsx(L,{className:"size-5 text-muted-foreground"})})}),s.jsx("td",{className:"py-3 pr-4 font-medium",children:t.title}),s.jsx("td",{className:"py-3 pr-4",children:s.jsx(k,{variant:"outline",children:t.category})}),s.jsx("td",{className:"py-3 pr-4",children:s.jsx(k,{variant:t.is_published?"default":"secondary",children:t.is_published?"منشور":"غير منشور"})}),s.jsx("td",{className:"py-3 pr-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(l,{variant:"ghost",size:"icon",title:"الوسائط",asChild:!0,children:s.jsx(C,{href:G.url({project:t.id}),children:s.jsx(le,{className:"size-4"})})}),s.jsx(l,{variant:"ghost",size:"icon",title:t.is_published?"إلغاء النشر":"نشر",onClick:()=>T(t),children:t.is_published?s.jsx(Y,{className:"size-4 text-orange-500"}):s.jsx(Z,{className:"size-4 text-green-500"})}),s.jsx(l,{asChild:!0,variant:"ghost",size:"icon",title:"تعديل",children:s.jsx(C,{href:E.url({project:t.id}),children:s.jsx(ee,{className:"size-4"})})}),s.jsx(l,{variant:"ghost",size:"icon",title:"حذف",className:"text-destructive hover:text-destructive",onClick:()=>H(t.id,t.title),children:s.jsx(se,{className:"size-4"})})]})})]},t.id))})]})}),e[15]=f,e[16]=r,e[17]=d):d=e[17];let m;e[18]!==o||e[19]!==d?(m=s.jsxs(q,{children:[o,d]}),e[18]=o,e[19]=d,e[20]=m):m=e[20];let h;e[21]!==m||e[22]!==n?(h=s.jsxs(J,{children:[n,m]}),e[21]=m,e[22]=n,e[23]=h):h=e[23];let v;return e[24]!==h||e[25]!==c?(v=s.jsxs(K,{breadcrumbs:ie,children:[j,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[c,b,h]})]}),e[24]=h,e[25]=c,e[26]=v):v=e[26],v}function ae(i){P.patch(E.url({project:i.id}),{is_published:!i.is_published},{preserveScroll:!0,onSuccess:()=>{x.success(i.is_published?"تم إلغاء نشر المشروع":"تم نشر المشروع بنجاح")}})}function ce(i,e){x.warn(s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"mb-2 font-bold",children:['هل أنت متأكد من حذف المشروع "',e,'"؟']}),s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(l,{size:"sm",variant:"destructive",onClick:()=>{P.delete(U.url({project:i}),{onSuccess:oe}),x.dismiss()},children:"نعم، حذف"}),s.jsx(l,{size:"sm",variant:"outline",onClick:ne,children:"إلغاء"})]})]}),{closeButton:!1,closeOnClick:!1,draggable:!1,autoClose:!1})}function ne(){return x.dismiss()}function oe(){x.success("تم حذف المشروع بنجاح")}export{ke as default};
